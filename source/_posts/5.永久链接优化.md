---
title: 优化Hexo博客文章永久链接的几种方法
date: 2025-04-12 10:00:00
tags:
  - Hexo
  - 教程
categories:
  - Hexo
series: 5
description: 本文介绍三种优化 Hexo 博客永久链接的方法，解决默认链接过长、不稳定的问题，提升 SEO 和用户体验。通过时间戳、哈希生成等方法，轻松实现简洁、稳定的永久链接格式。
---

# 默认永久链接格式的弊端

在默认Hexo+Butterfly中，采用title标题作为永久链接

{% note warning flat %}

**使用默认永久链接格式导致我们在访问文章页面时会发现默认的文章链接相当的长，满是中文链接的转义字符**

**而且如果变动了标题那么会导致永久链接也会变，对搜索引擎极其不利**

{% endnote %}

在[HEXO官方文档](https://hexo.io/zh-cn/docs/permalinks)中也提供了一些参数可供修改

| 变量          | 描述                                                         |
| :------------ | :----------------------------------------------------------- |
| `:year`       | 文章的发表年份（4 位数）                                     |
| `:month`      | 文章的发表月份（2 位数）                                     |
| `:i_month`    | 文章的发表月份（不含前导零）                                 |
| `:day`        | 文章的发表日期 (2 位数)                                      |
| `:i_day`      | 文章的发表日期（不含前导零）                                 |
| `:hour`       | 文章发表时的小时 (2 位数)                                    |
| `:minute`     | 文章发表时的分钟 (2 位数)                                    |
| `:second`     | 文章发表时的秒钟 (2 位数)                                    |
| `:title`      | 文件名称 (相对于 “source/_posts/“ 文件夹)                    |
| `:name`       | 文件名称                                                     |
| `:post_title` | 文章标题                                                     |
| `:id`         | 文章 ID (*[清除缓存](https://hexo.io/zh-cn/docs/commands#clean)时不具有持久性*) |
| `:category`   | 分类。 如果文章没有分类，则是 `default_category` 配置信息。  |
| `:hash`       | 文件名（与 `:title` 相同）和日期的 SHA1 哈希值（12位16进制数） |

# 第一种方法：/article/年/月/日/时/分/秒.html



{% note success modern %}

**格式：`/article/年/月/日/时/分/秒.html`**

**示例：`/article/2025/04/12/10/00/00.html`**

{% endnote %}

{% note info modern %}

在`_config.yml`中设置

```yaml
permalink: /article/:year/:month/:day/:hour/:minute/:second.html
```

{% endnote %}

这样，假设有一篇文章Front-matter中的date是2025-04-12 10:00:00，那么这篇文章的永久链接为`example.com/article/2025/04/12/10/00/00.html`

当然，也可以不加/article，在_config.yml设置`permalink: /:year/:month/:day/:hour/:minute/:second.html`，这样的永久链接格式就为`/2025/04/12/10/00/00.html`，不过从生成的链接根目录看可能有比较多的文件夹，对于有强迫症的朋友们或许不是那么友好。

# 第二种方法，/年月日时分秒.html

{% note success modern %}

**格式：`/年月日时分秒.html`**

**示例：`/20250412100000.html`**

{% endnote %}

按照这种方法，假设有一篇文章的Front-matter中的date是2025-04-12 10:00:00，那么这篇文章的永久链接就为：`example.com/20250412100000.html`

**操作步骤：**

1. 在`_config.yml`中设置

```yaml
permalink: :datelink.html
```

2. 在博客根目录下创建`/scripts`文件夹

3. 在/scripts文件夹中创建`datelink.js`，填入以下代码：


```javascript
'use strict';

// 确保hexo对象存在
var hexo = hexo || {};

// 注册一个before_post_render过滤器
hexo.extend.filter.register('before_post_render', function(data) {
    // 检查文章布局是否为'post'
    if (data.layout === 'post') {
        // 检查data.date是否存在且是否为有效的日期对象
        if (data.date && typeof data.date.format === 'function') {
            // 使用Moment.js格式化日期
            data.datelink = data.date.format('YYYYMMDDHHmmss');
        } else {
            // 如果data.date不是有效的日期对象，输出错误日志
            console.error('Invalid date object for post:', data);
            console.error('data.date日期对象不合法：', data);
        }
    }
    // 返回处理后的数据
    return data;
}, 15);
```

这样，假设有一篇文章的Front-matter中的date是2025-04-12 10:00:00，那么这篇文章的永久链接就为：`example.com/20250412100000.html`，**这就是我目前写这篇文章时在用的永久链接格式**。

# 第三种方法：基于文件路径的哈希

{% note success modern %}

**格式：`/:hash(6).html`**

**示例：`a3b8d9.html`**

{% endnote %}

原理：使用文件绝对路径生成短哈希，确保文件名或内容修改不影响链接

**操作步骤：**

1. 创建文件 `scripts/hash-permalink.js`，填入以下内容：

```
const crypto = require('crypto');

hexo.extend.filter.register('before_post_render', function(data) {
  const hash = crypto.createHash('sha1')
    .update(data.source)
    .digest('hex')
    .substring(0, 6);
  data.hash = hash;
  return data;
});
```

2. **修改`_config.yml`：**

```yaml
permalink: :hash.html
```

**注意事项**：

- 必须保持文件路径不变（重命名文件会导致链接变化）

- 哈希冲突概率约为1600万分之一，完全可以忽略不计
